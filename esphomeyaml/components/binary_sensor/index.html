<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><meta http-equiv="X-UA-Compatible"content="IE=Edge"><meta http-equiv="Content-Type"content="text/html; charset=utf-8"><title>Binary Sensor Component &#8212; esphomelib 1.6.2 documentation</title><link rel="stylesheet"href="../../../_static/alabaster.css"type="text/css"><link rel="stylesheet"href="../../../_static/pygments.css"type="text/css"><script src="../../../_static/documentation_options.js"></script><script src="../../../_static/jquery.js"></script><script src="../../../_static/underscore.js"></script><script src="../../../_static/doctools.js"></script><link rel="index"title="Index"href="../../../genindex.html"><link rel="search"title="Search"href="../../../search.html"><link rel="next"title="GPIO Binary Sensor"href="gpio.html"><link rel="prev"title="Components"href="../index.html"><link rel="stylesheet"href="../../../_static/custom.css"type="text/css"><meta name="viewport"content="width=device-width,initial-scale=0.9,maximum-scale=0.9"><div class="document"><div class="documentwrapper"><div class="bodywrapper"><div class="body"role="main"><div class="section"id="binary-sensor-component"><h1>Binary Sensor Component<a class="headerlink"href="#binary-sensor-component"title="Permalink to this headline">¶</a></h1><p>With esphomelib you can use different types of binary sensors. They will automatically appear in the Home Assistant front-end and have several configuration options.<div class="section"id="base-binary-sensor-configuration"><span id="config-binary-sensor"></span><h2>Base Binary Sensor Configuration<a class="headerlink"href="#base-binary-sensor-configuration"title="Permalink to this headline">¶</a></h2><p>All binary sensors have a platform and an optional device class. By default, the binary will chose the appropriate device class itself, but you can always override it.<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">binary_sensor</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">platform</span><span class="p">:</span> <span class="o">...</span>
    <span class="n">device_class</span><span class="p">:</span> <span class="n">motion</span>
</pre></div></div><p>Configuration variables:<ul class="simple"><li><strong>device_class</strong> (<em>Optional</em>, string): The device class for the sensor. See <a class="reference external"href="https://www.home-assistant.io/components/binary_sensor/">https://www.home-assistant.io/components/binary_sensor/</a> for a list of available options.<li><strong>inverted</strong> (<em>Optional</em>, boolean): Whether to invert the binary sensor output, i.e.&nbsp;report ON states as OFF and vice versa. Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.<li><strong>on_press</strong> (<em>Optional</em>, <a class="reference internal"href="../../guides/automations.html#automation"><span class="std std-ref">Automation</span></a>): An automation to perform when the button is pressed. See <a class="reference internal"href="#binary-sensor-on-press"><span class="std std-ref">on_press</span></a>.<li><strong>on_release</strong> (<em>Optional</em>, <a class="reference internal"href="../../guides/automations.html#automation"><span class="std std-ref">Automation</span></a>): An automation to perform when the button is released. See <a class="reference internal"href="#binary-sensor-on-release"><span class="std std-ref">on_release</span></a>.<li><strong>on_click</strong> (<em>Optional</em>, <a class="reference internal"href="../../guides/automations.html#automation"><span class="std std-ref">Automation</span></a>): An automation to perform when the button is held down for a specified period of time. See <a class="reference internal"href="#binary-sensor-on-click"><span class="std std-ref">on_click</span></a>.<li><strong>on_click</strong> (<em>Optional</em>, <a class="reference internal"href="../../guides/automations.html#automation"><span class="std std-ref">Automation</span></a>): An automation to perform when the button is pressed twice for specified periods of time. See <a class="reference internal"href="#binary-sensor-on-double-click"><span class="std std-ref">on_double_click</span></a>.<li>All other options from <a class="reference internal"href="../mqtt.html#config-mqtt-component"><span class="std std-ref">MQTT Component</span></a>.</ul><div class="section"id="binary-sensor-automation"><h3>Binary Sensor Automation<a class="headerlink"href="#binary-sensor-automation"title="Permalink to this headline">¶</a></h3><p>The triggers for binary sensors in esphomeyaml use the lingo from computer mouses. This naming might not perfectly fit every use case, but at least makes the naming consistent. For example, a <code class="docutils literal notranslate"><span class="pre">press</span></code> is triggered in the first moment when the button on your mouse is pushed down.<p>You can access the current state of the binary sensor in <a class="reference internal"href="../../guides/automations.html#config-lambda"><span class="std std-ref">lambdas</span></a> using <code class="docutils literal notranslate"><span class="pre">id(binary_sensor_id).value</span></code>.<div class="section"id="on-press"><span id="binary-sensor-on-press"></span><h4><code class="docutils literal notranslate"><span class="pre">on_press</span></code><a class="headerlink"href="#on-press"title="Permalink to this headline">¶</a></h4><p>This automation will be triggered when the button is first pressed down, or in other words on the leading edge of the signal.<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">binary_sensor</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">platform</span><span class="p">:</span> <span class="n">gpio</span>
    <span class="c1"># ...</span>
    <span class="n">on_press</span><span class="p">:</span>
      <span class="n">then</span><span class="p">:</span>
        <span class="o">-</span> <span class="n">switch</span><span class="o">.</span><span class="n">turn_on</span><span class="p">:</span>
            <span class="nb">id</span><span class="p">:</span> <span class="n">relay_1</span>
</pre></div></div><p>Configuration variables: See <a class="reference internal"href="../../guides/automations.html#automation"><span class="std std-ref">Automation</span></a>.</div><div class="section"id="on-release"><span id="binary-sensor-on-release"></span><h4><code class="docutils literal notranslate"><span class="pre">on_release</span></code><a class="headerlink"href="#on-release"title="Permalink to this headline">¶</a></h4><p>This automation will be triggered when a button press ends, or in other words on the falling edge of the signal.<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">binary_sensor</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">platform</span><span class="p">:</span> <span class="n">gpio</span>
    <span class="c1"># ...</span>
    <span class="n">on_release</span><span class="p">:</span>
      <span class="n">then</span><span class="p">:</span>
        <span class="o">-</span> <span class="n">switch</span><span class="o">.</span><span class="n">turn_off</span><span class="p">:</span>
            <span class="nb">id</span><span class="p">:</span> <span class="n">relay_1</span>
</pre></div></div><p>Configuration variables: See <a class="reference internal"href="../../guides/automations.html#automation"><span class="std std-ref">Automation</span></a>.</div><div class="section"id="on-click"><span id="binary-sensor-on-click"></span><h4><code class="docutils literal notranslate"><span class="pre">on_click</span></code><a class="headerlink"href="#on-click"title="Permalink to this headline">¶</a></h4><p>This automation will be triggered when a button is pressed down for a time period of length <code class="docutils literal notranslate"><span class="pre">min_length</span></code> to <code class="docutils literal notranslate"><span class="pre">max_length</span></code>. Any click longer or shorter than this will not trigger the automation. The automation is therefore also triggered on the falling edge of the signal.<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">binary_sensor</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">platform</span><span class="p">:</span> <span class="n">gpio</span>
    <span class="c1"># ...</span>
    <span class="n">on_click</span><span class="p">:</span>
      <span class="n">min_length</span><span class="p">:</span> <span class="mi">50</span><span class="n">ms</span>
      <span class="n">max_length</span><span class="p">:</span> <span class="mi">350</span><span class="n">ms</span>
      <span class="n">then</span><span class="p">:</span>
        <span class="o">-</span> <span class="n">switch</span><span class="o">.</span><span class="n">turn_off</span><span class="p">:</span>
            <span class="nb">id</span><span class="p">:</span> <span class="n">relay_1</span>
</pre></div></div><p>Configuration variables:<ul class="simple"><li><strong>min_length</strong> (<em>Optional</em>, <a class="reference internal"href="../../guides/configuration-types.html#config-time"><span class="std std-ref">Time</span></a>): The minimum duration the click should last. Defaults to <code class="docutils literal notranslate"><span class="pre">50ms</span></code>.<li><strong>max_length</strong> (<em>Optional</em>, <a class="reference internal"href="../../guides/configuration-types.html#config-time"><span class="std std-ref">Time</span></a>): The maximum duration the click should last. Defaults to <code class="docutils literal notranslate"><span class="pre">350ms</span></code>.<li>See <a class="reference internal"href="../../guides/automations.html#automation"><span class="std std-ref">Automation</span></a>.</ul></div><div class="section"id="on-double-click"><span id="binary-sensor-on-double-click"></span><h4><code class="docutils literal notranslate"><span class="pre">on_double_click</span></code><a class="headerlink"href="#on-double-click"title="Permalink to this headline">¶</a></h4><div class="admonition warning"><p class="first admonition-title">Warning<p class="last">This trigger is not final and could be replaced by a <code class="docutils literal notranslate"><span class="pre">on_multi_click</span></code> option which would allow triggering for any number of clicks.</div><p>This automation will be triggered when a button is pressed down twice, with the first click lasting between <code class="docutils literal notranslate"><span class="pre">min_length</span></code> and <code class="docutils literal notranslate"><span class="pre">max_length</span></code>. When a second leading edge then happens within <code class="docutils literal notranslate"><span class="pre">min_length</span></code> and <code class="docutils literal notranslate"><span class="pre">max_length</span></code>, the automation is triggered.<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">binary_sensor</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">platform</span><span class="p">:</span> <span class="n">gpio</span>
    <span class="c1"># ...</span>
    <span class="n">on_double_click</span><span class="p">:</span>
      <span class="n">min_length</span><span class="p">:</span> <span class="mi">50</span><span class="n">ms</span>
      <span class="n">max_length</span><span class="p">:</span> <span class="mi">350</span><span class="n">ms</span>
      <span class="n">then</span><span class="p">:</span>
        <span class="o">-</span> <span class="n">switch</span><span class="o">.</span><span class="n">turn_off</span><span class="p">:</span>
            <span class="nb">id</span><span class="p">:</span> <span class="n">relay_1</span>
</pre></div></div><p>Configuration variables:<ul class="simple"><li><strong>min_length</strong> (<em>Optional</em>, <a class="reference internal"href="../../guides/configuration-types.html#config-time"><span class="std std-ref">Time</span></a>): The minimum duration the click should last. Defaults to <code class="docutils literal notranslate"><span class="pre">50ms</span></code>.<li><strong>max_length</strong> (<em>Optional</em>, <a class="reference internal"href="../../guides/configuration-types.html#config-time"><span class="std std-ref">Time</span></a>): The maximum duration the click should last. Defaults to <code class="docutils literal notranslate"><span class="pre">350ms</span></code>.<li>See <a class="reference internal"href="../../guides/automations.html#automation"><span class="std std-ref">Automation</span></a>.</ul></div><div class="section"id="lambda-calls"><h4>lambda calls<a class="headerlink"href="#lambda-calls"title="Permalink to this headline">¶</a></h4><p>From <a class="reference internal"href="../../guides/automations.html#config-lambda"><span class="std std-ref">lambdas</span></a>, you can call several methods on all binary sensors to do some advanced stuff (see the full <a class="reference internal"href="../../../api/binary_sensor/index.html"><span class="doc">API Reference</span></a> for more info).<ul><li><p class="first"><code class="docutils literal notranslate"><span class="pre">publish_state()</span></code>: Manually cause the binary sensor to publish and store a state from anywhere in the program.<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Within</span> <span class="k">lambda</span><span class="p">,</span> <span class="n">publish</span> <span class="n">an</span> <span class="n">OFF</span> <span class="n">state</span><span class="o">.</span>
<span class="nb">id</span><span class="p">(</span><span class="n">my_binary_sensor</span><span class="p">)</span><span class="o">.</span><span class="n">publish_state</span><span class="p">(</span><span class="n">false</span><span class="p">);</span>

<span class="o">//</span> <span class="n">Within</span> <span class="k">lambda</span><span class="p">,</span> <span class="n">publish</span> <span class="n">an</span> <span class="n">ON</span> <span class="n">state</span><span class="o">.</span>
<span class="nb">id</span><span class="p">(</span><span class="n">my_binary_sensor</span><span class="p">)</span><span class="o">.</span><span class="n">publish_state</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
</pre></div></div><li><p class="first"><code class="docutils literal notranslate"><span class="pre">value</span></code>: Retrieve the current value of the binary sensor.<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Within</span> <span class="k">lambda</span><span class="p">,</span> <span class="n">get</span> <span class="n">the</span> <span class="n">binary</span> <span class="n">sensor</span> <span class="n">state</span> <span class="ow">and</span> <span class="n">conditionally</span> <span class="n">do</span> <span class="n">something</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">my_binary_sensor</span><span class="p">)</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="o">//</span> <span class="n">Binary</span> <span class="n">sensor</span> <span class="ow">is</span> <span class="n">ON</span><span class="p">,</span> <span class="n">do</span> <span class="n">something</span> <span class="n">here</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="o">//</span> <span class="n">Binary</span> <span class="n">sensor</span> <span class="ow">is</span> <span class="n">OFF</span><span class="p">,</span> <span class="n">do</span> <span class="n">something</span> <span class="k">else</span> <span class="n">here</span>
<span class="p">}</span>
</pre></div></div></ul></div></div></div><div class="section"id="see-also"><h2>See Also<a class="headerlink"href="#see-also"title="Permalink to this headline">¶</a></h2><ul class="simple"><li><a class="reference internal"href="../../../api/binary_sensor/index.html"><span class="doc">API Reference</span></a><li><a class="reference external"href="https://github.com/OttoWinter/esphomedocs/blob/current/esphomeyaml/components/binary_sensor/index.rst">Edit this page on GitHub</a></ul><div class="toctree-wrapper compound"><ul><li class="toctree-l1"><a class="reference internal"href="gpio.html">GPIO Binary Sensor</a><li class="toctree-l1"><a class="reference internal"href="status.html">Status Binary Sensor</a><li class="toctree-l1"><a class="reference internal"href="esp32_ble.html">ESP32 Bluetooth Low Energy Device</a><li class="toctree-l1"><a class="reference internal"href="esp32_touch.html">ESP32 Touch Pad Binary Sensor</a><li class="toctree-l1"><a class="reference internal"href="template.html">Template Binary Sensor</a></ul></div></div></div></div></div></div><div class="sphinxsidebar"role="navigation"aria-label="main navigation"><div class="sphinxsidebarwrapper"><div class="relations"><h3>Related Topics</h3><ul><li><a href="../../../index.html">Documentation overview</a><ul><li><a href="../../index.html">esphomeyaml</a><ul><li><a href="../index.html">Components</a><ul><li>Previous: <a href="../index.html"title="previous chapter">Components</a><li>Next: <a href="gpio.html"title="next chapter">GPIO Binary Sensor</a></ul></ul></ul></ul></div><div id="searchbox"style="display: none"role="search"><h3>Quick search</h3><div class="searchformwrapper"><form class="search"action="../../../search.html"><input name="q"> <input type="submit"value="Go"> <input type="hidden"name="check_keywords"value="yes"> <input type="hidden"name="area"value="default"></form></div></div><script>$('#searchbox').show(0);</script></div></div><div class="clearer"></div></div><div class="footer">&copy;2018, Otto Winter. | Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.2</a> &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a> | <a href="../../../_sources/esphomeyaml/components/binary_sensor/index.rst.txt"rel="nofollow">Page source</a></div>