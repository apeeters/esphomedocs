<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><meta http-equiv="X-UA-Compatible"content="IE=Edge"><meta http-equiv="Content-Type"content="text/html; charset=utf-8"><title>Dallas Temperature Sensor &#8212; esphomelib 1.6.2 documentation</title><link rel="stylesheet"href="../../../_static/alabaster.css"type="text/css"><link rel="stylesheet"href="../../../_static/pygments.css"type="text/css"><script src="../../../_static/documentation_options.js"></script><script src="../../../_static/jquery.js"></script><script src="../../../_static/underscore.js"></script><script src="../../../_static/doctools.js"></script><link rel="index"title="Index"href="../../../genindex.html"><link rel="search"title="Search"href="../../../search.html"><link rel="next"title="Analog To Digital Sensor"href="adc.html"><link rel="prev"title="Sensor Component"href="index.html"><link rel="stylesheet"href="../../../_static/custom.css"type="text/css"><meta name="viewport"content="width=device-width,initial-scale=0.9,maximum-scale=0.9"><div class="document"><div class="documentwrapper"><div class="bodywrapper"><div class="body"role="main"><div class="section"id="dallas-temperature-sensor"><h1>Dallas Temperature Sensor<a class="headerlink"href="#dallas-temperature-sensor"title="Permalink to this headline">¶</a></h1><p>The <code class="docutils literal notranslate"><span class="pre">dallas</span></code> sensor allows you to use ds18b20 and similar sensors. First, you need to define a <a class="reference internal"href="../dallas.html"><span class="doc">dallas sensor component</span></a>. The dallas sensor component (or “hub”) is an internal model that defines which pins the ds18b20 sensors are connected to. This is because with these sensors you can actually connect multiple sensors to a single pin and use them all at once.<p>To initialize a sensor, first supply either <code class="docutils literal notranslate"><span class="pre">address</span></code> <strong>or</strong> <code class="docutils literal notranslate"><span class="pre">index</span></code> to identify the sensor.<div class="figure align-center"id="id1"><a class="reference external image-reference"href="https://www.adafruit.com/product/374"><img alt="../../../_images/dallas-wired.jpg"src="../../../_images/dallas-wired.jpg"style="width: 50.0%;"></a><p class="caption"><span class="caption-text">Wired Version of the DS18b20 One-Wire Temperature Sensor.</span></div><div class="figure align-center"><a class="reference internal image-reference"href="../../../_images/temperature.png"><img alt="../../../_images/temperature.png"src="../../../_images/temperature.png"style="width: 80.0%;"></a></div><div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example configuration entry</span>
<span class="n">dallas</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">pin</span><span class="p">:</span> <span class="n">GPIO23</span>

<span class="c1"># Individual sensors</span>
<span class="n">sensor</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">platform</span><span class="p">:</span> <span class="n">dallas</span>
    <span class="n">address</span><span class="p">:</span> <span class="mh">0x1C0000031EDD2A28</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Living Room Temperature&quot;</span>
</pre></div></div><div class="section"id="configuration-variables"><h2>Configuration variables:<a class="headerlink"href="#configuration-variables"title="Permalink to this headline">¶</a></h2><ul class="simple"><li><strong>address</strong> (<strong>Required</strong>, int): The address of the sensor. Use either this option or index.<li><strong>index</strong> (<strong>Required</strong>, int): The index of the sensor starting with 0. So the first sensor will for example have index 0. <a class="reference internal"href="#dallas-getting-ids"><span class="std std-ref">It’s recommended to use address instead</span></a>.<li><strong>resolution</strong> (<em>Optional</em>, int): An optional resolution from 8 to 12. Higher means more accurate. Defaults to the maximum for most dallas temperature sensors: 12.<li><strong>dallas_id</strong> (<em>Optional</em>, <a class="reference internal"href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): The ID of the <a class="reference internal"href="../dallas.html"><span class="doc">dallas hub</span></a>. Use this if you have multiple dallas hubs.<li><strong>id</strong> (<em>Optional</em>, <a class="reference internal"href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): Manually specify the ID used for code generation.<li>All other options from <a class="reference internal"href="index.html#config-sensor"><span class="std std-ref">Sensor</span></a> and <a class="reference internal"href="../mqtt.html#config-mqtt-component"><span class="std std-ref">MQTT Component</span></a>.</ul></div><div class="section"id="getting-sensor-ids"><span id="dallas-getting-ids"></span><h2>Getting Sensor IDs<a class="headerlink"href="#getting-sensor-ids"title="Permalink to this headline">¶</a></h2><p>It is highly recommended to use the <code class="docutils literal notranslate"><span class="pre">address</span></code> attribute for creating dallas sensors, because if you have multiple sensors on a bus and the automatic sensor discovery fails, all sensors indices will be shifted by one. In order to get the address, simply start the firmware on your device with a configured dallas hub and observe the log output (the <a class="reference internal"href="../logger.html#logger-log-levels"><span class="std std-ref">log level</span></a> must be set to at least <code class="docutils literal notranslate"><span class="pre">debug</span></code>!). Note that you don’t need to define the individual sensors just yet, as the scanning will happen even with no sensors connected. For example with this configuration:<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example configuration entry</span>
<span class="n">dallas</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">pin</span><span class="p">:</span> <span class="n">GPIO23</span>

<span class="c1"># Note you don&#39;t have to add any sensors at this point</span>
</pre></div></div><p>You will find something like this:<div class="figure"><img alt="../../../_images/dallas-log.png"src="../../../_images/dallas-log.png"></div><p>Now we can add the individual sensors to our configuration:<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example configuration entry</span>
<span class="n">dallas</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">pin</span><span class="p">:</span> <span class="n">GPIO23</span>

<span class="n">sensor</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">platform</span><span class="p">:</span> <span class="n">dallas</span>
    <span class="n">address</span><span class="p">:</span> <span class="mh">0xA40000031F055028</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Temperature #1&quot;</span>
  <span class="o">-</span> <span class="n">platform</span><span class="p">:</span> <span class="n">dallas</span>
    <span class="n">address</span><span class="p">:</span> <span class="mh">0xDD0000031EFB0428</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Temperature #2&quot;</span>
  <span class="o">-</span> <span class="n">platform</span><span class="p">:</span> <span class="n">dallas</span>
    <span class="c1"># ...</span>
</pre></div></div><p>Next, individually warm up or cool down the sensors and observe the log again. You will see the outputted sensor values changing when they’re being warmed. When you’re finished mapping each address to a name, just change the <code class="docutils literal notranslate"><span class="pre">Temperature</span> <span class="pre">#1</span></code> to your assigned names and you should be ready.<div class="section"id="see-also"><h3>See Also<a class="headerlink"href="#see-also"title="Permalink to this headline">¶</a></h3><ul class="simple"><li><a class="reference internal"href="index.html#sensor-filters"><span class="std std-ref">Sensor Filters</span></a><li><a class="reference internal"href="../dallas.html"><span class="doc">Dallas Temperature Component</span></a><li><a class="reference internal"href="max6675.html"><span class="doc">MAX6675 K-Type Thermocouple Temperature Sensor</span></a><li><a class="reference internal"href="../../../api/sensor/dallas.html"><span class="doc">API Reference</span></a><li><a class="reference external"href="https://github.com/OttoWinter/esphomedocs/blob/current/esphomeyaml/components/sensor/dallas.rst">Edit this page on GitHub</a></ul></div></div></div></div></div></div><div class="sphinxsidebar"role="navigation"aria-label="main navigation"><div class="sphinxsidebarwrapper"><div class="relations"><h3>Related Topics</h3><ul><li><a href="../../../index.html">Documentation overview</a><ul><li><a href="../../index.html">esphomeyaml</a><ul><li><a href="../index.html">Components</a><ul><li><a href="index.html">Sensor Component</a><ul><li>Previous: <a href="index.html"title="previous chapter">Sensor Component</a><li>Next: <a href="adc.html"title="next chapter">Analog To Digital Sensor</a></ul></ul></ul></ul></ul></div><div id="searchbox"style="display: none"role="search"><h3>Quick search</h3><div class="searchformwrapper"><form class="search"action="../../../search.html"><input name="q"> <input type="submit"value="Go"> <input type="hidden"name="check_keywords"value="yes"> <input type="hidden"name="area"value="default"></form></div></div><script>$('#searchbox').show(0);</script></div></div><div class="clearer"></div></div><div class="footer">&copy;2018, Otto Winter. | Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.2</a> &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a> | <a href="../../../_sources/esphomeyaml/components/sensor/dallas.rst.txt"rel="nofollow">Page source</a></div>